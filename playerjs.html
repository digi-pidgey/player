<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <title></title>
    <meta charset="UTF-8">
    <script src="playerjs.js" type="text/javascript"></script>
    <style>
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background-color: black;
        }
    </style>
</head>
<body>
    <div id="playerjs" style="width:100%;height:100%;"></div>

    <script type="text/javascript">
        var vs = {
            id: "playerjs",
            autoplay: 1,
            muted: 1
        };

        // Parse URL parameters, ignoring autoplay and muted overrides
        if (location.href.indexOf("html?") > -1) {
            var ps = location.href.substr(location.href.indexOf("html?") + 5).split("&");
            for (var i = 0; i < ps.length; i++) {
                var parts = ps[i].split("=");
                var p = parts[0];
                var v = parts[1];
                if (p && v && p !== "autoplay" && p !== "muted") {
                    vs[p] = decodeURIComponent(v);
                }
            }
        }

        console.log("PlayerJS config:", vs);

        // Initialize the player
        var playerjs = new Playerjs(vs);

        // Add postMessage listener to allow play trigger from parent
        window.addEventListener("message", function(event) {
            if (event.data === "play") {
                try {
                    playerjs.api("play");
                } catch (e) {
                    console.warn("Failed to trigger play:", e);
                }
            }
        });
    </script>
</body>
</html>
